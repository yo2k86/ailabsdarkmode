<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ordal Scanner</title>
  
  <!-- Memuat Tailwind CSS langsung dari browser -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Memuat React dan Babel agar kode JSX bisa jalan di browser -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    // Kode Workspace yang hanya muncul peringatan (Aplikasi sudah dihapus)
    const workspaceHTML = `<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ailabs Workspace</title>
    <script src="https://cdn.tailwindcss.com"><\/script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Orbitron:wght@500;700;900&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        tech: ['Orbitron', 'sans-serif'],
                    },
                    colors: {
                        neonBlue: '#00ffd5',
                        neonOrange: '#FF9900',
                        deepDark: '#050110',
                    }
                }
            }
        }
    <\/script>

    <style>
        body {
            background: #050110; 
            background-image: url('./foto-profil.png'); 
            background-size: cover;
            background-position: center center; 
            background-repeat: no-repeat;
            background-attachment: fixed;
            overflow: hidden;
        }
        .bg-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.6);
            z-index: -1;
        }
        .glass-panel {
            background: rgba(10, 10, 15, 0.85); 
            backdrop-filter: blur(10px); 
            border: 1px solid rgba(255, 255, 255, 0.1); 
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
        }
        .v-bar { width: 4px; background: #00ffd5; border-radius: 2px 2px 0 0; box-shadow: 0 0 5px #00ffd5; transition: height 0.08s ease; }
    </style>
</head>
<body class="text-gray-100 min-h-screen flex items-center justify-center p-4">

    <audio id="bg-audio" loop crossorigin="anonymous">
        <source src="background-music.mp3" type="audio/mpeg">
    </audio>

    <div class="bg-overlay"></div>

    <div class="w-full max-w-2xl relative z-10">
        <div class="glass-panel rounded-3xl p-10 text-center border-t-4 border-neonOrange">
            <!-- Logo Tetap Ada -->
            <div class="mb-6 flex flex-col items-center">
                <div class="w-16 h-16 bg-neonOrange/20 rounded-full flex items-center justify-center mb-4 border border-neonOrange/30 p-3">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-full h-full text-neonOrange">
                        <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <h1 class="text-3xl font-tech font-bold text-white tracking-widest uppercase">AILABS WORKSPACE</h1>
            </div>

            <!-- Pesan Peringatan Sesuai Permintaan -->
            <div class="bg-black/50 border border-white/10 rounded-2xl p-8 mb-8">
                <h2 class="text-neonOrange font-bold text-xl mb-4 animate-pulse">PEMBERITAHUAN PENTING</h2>
                <p class="text-gray-200 text-lg leading-relaxed">
                    Mohon maaf, seluruh fitur aplikasi di dalam Workspace sedang dinonaktifkan untuk pemeliharaan sistem skala besar hingga pemberitahuan lebih lanjut.
                </p>
            </div>

            <!-- Musik Visualizer Tetap Ada -->
            <div class="flex flex-col items-center gap-4 mb-8">
                <div class="flex items-center gap-3 bg-black/40 px-4 py-2 rounded-lg border border-white/10">
                    <button id="sound-toggle" class="text-neonBlue">
                        <svg id="icon-sound-on" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>
                    </button>
                    <div id="visualizer" class="flex items-end gap-[2px] h-4">
                        <div class="v-bar h-1"></div><div class="v-bar h-1"></div><div class="v-bar h-1"></div><div class="v-bar h-1"></div><div class="v-bar h-1"></div><div class="v-bar h-1"></div>
                    </div>
                </div>
            </div>

            <button onclick="window.parent.location.reload()" class="text-red-400 border border-red-500/30 px-6 py-2 rounded-full text-xs font-bold hover:bg-red-500 hover:text-white transition-all uppercase tracking-widest">Logout</button>
        </div>
    </div>

    <script>
        const bgAudio = document.getElementById("bg-audio");
        let audioCtx, analyser, dataArray, isInit = false;

        function initVisualizer() {
            if(isInit) return;
            try {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                const src = audioCtx.createMediaElementSource(bgAudio);
                analyser = audioCtx.createAnalyser();
                src.connect(analyser);
                analyser.connect(audioCtx.destination);
                analyser.fftSize = 64;
                dataArray = new Uint8Array(analyser.frequencyBinCount);
                isInit = true;
                draw();
            } catch(e) {}
        }

        function draw() {
            if(!analyser) return;
            requestAnimationFrame(draw);
            analyser.getByteFrequencyData(dataArray);
            const bars = document.querySelectorAll('.v-bar');
            bars.forEach((bar, i) => {
                const h = (dataArray[i] / 255) * 16;
                bar.style.height = \`\${Math.max(2, h)}px\`;
            });
        }

        document.getElementById('sound-toggle').addEventListener('click', () => {
            if(bgAudio.paused) {
                bgAudio.play().then(() => initVisualizer());
            } else {
                bgAudio.pause();
            }
        });
        
        window.onload = () => {
            bgAudio.play().then(() => initVisualizer()).catch(() => {});
        };
    <\/script>
</body>
</html>`;

    const { useState, useRef, useEffect } = React;

    function App() {
      const [progress, setProgress] = useState(0);
      const [status, setStatus] = useState('idle'); 
      const intervalRef = useRef(null);

      useEffect(() => {
        return () => clearInterval(intervalRef.current);
      }, []);

      const startScan = () => {
        if (status === 'scanning' || status === 'rejected') return;
        setStatus('scanning');
        setProgress(0);
        clearInterval(intervalRef.current);
        intervalRef.current = setInterval(() => {
          setProgress((prev) => {
            if (prev >= 100) {
              clearInterval(intervalRef.current);
              setStatus('rejected');
              return 100;
            }
            return prev + 0.2; 
          });
        }, 30);
      };

      const resetScan = () => {
        setStatus('idle');
        setProgress(0);
      };

      const openWorkspace = () => {
        const iframe = document.createElement('iframe');
        iframe.style.position = 'fixed';
        iframe.style.top = '0';
        iframe.style.left = '0';
        iframe.style.width = '100vw';
        iframe.style.height = '100vh';
        iframe.style.border = 'none';
        iframe.style.zIndex = '9999';
        iframe.style.backgroundColor = '#050110';
        document.getElementById('root').style.display = 'none';
        document.body.appendChild(iframe);
        const iframeDoc = iframe.contentWindow.document;
        iframeDoc.open();
        iframeDoc.write(workspaceHTML);
        iframeDoc.close();
      };

      const getScanningText = (prog) => {
        if (prog < 15) return "Memindai NIK KTP...";
        if (prog < 30) return "Mencari relasi pejabat di KONOHA...";
        if (prog < 45) return "Mengecek saldo rekening ANDA...";
        if (prog < 60) return "Menganalisis mutasi paylater...";
        if (prog < 80) return "Memverifikasi \"DEKENGAN PUSAT\"...";
        if (prog < 100) return "Mencari pamong praja di grup WA keluarga...";
        return "Pemindaian selesai...";
      };

      // Styles Asli sesuai Permintaan
      let currentMessage = "Tahan sidik jari untuk memindai privilese.";
      let borderColor = "border-teal-400";
      let bgColor = "bg-teal-400/10";
      let textColor = "text-teal-400";
      let shadowColor = "shadow-[0_0_20px_rgba(45,212,191,0.3)]";
      let fingerprintColor = "#ffffff";

      if (status === 'scanning') {
        currentMessage = `${getScanningText(progress)} ${Math.floor(progress)}%`;
        borderColor = "border-teal-300";
        textColor = "text-teal-300";
        fingerprintColor = "#4fd1c5";
        shadowColor = "shadow-[0_0_25px_rgba(45,212,191,0.5)]";
      }

      return (
        <div className="min-h-screen bg-[#171821] flex flex-col items-center justify-center font-sans select-none relative overflow-hidden">
          {/* Efek Garis Scan CRT Asli */}
          <div className="absolute inset-0 pointer-events-none bg-[linear-gradient(transparent_50%,rgba(0,0,0,0.15)_50%)] bg-[length:100%_4px] z-0"></div>

          <div className="z-10 flex flex-col items-center w-full max-w-2xl px-6">
            
            {status === 'rejected' ? (
              <div className="w-full flex flex-col gap-5 animate-[fadeIn_0.6s_ease-out]">
                <div className="border-[3px] border-teal-400/80 rounded-2xl py-4 flex justify-center items-center shadow-[0_0_15px_rgba(45,212,191,0.2)] bg-teal-400/5">
                  <h2 className="text-teal-400 font-bold text-xl md:text-2xl tracking-[0.1em] uppercase">Pemindaian Selesai</h2>
                </div>

                <div className="border-[3px] border-rose-400/80 rounded-3xl p-8 flex flex-col items-center shadow-[0_0_25px_rgba(251,113,133,0.15)] bg-rose-400/5 mt-2">
                  <svg className="w-16 h-16 text-rose-400 mb-5 drop-shadow-[0_0_10px_rgba(251,113,133,0.5)]" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round">
                    <path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                    <path d="M12 9v4"/><path d="M12 17h.01"/>
                  </svg>
                  <h2 className="text-rose-400 font-bold text-2xl md:text-3xl mb-5 tracking-wide drop-shadow-md text-center uppercase">Status: Beban Keluarga ðŸ¤£</h2>
                  <p className="text-white text-center text-lg md:text-xl leading-relaxed font-medium">
                    Sistem menolak memindai. Daripada nyari orang dalam, mending kamu mandi dulu sana, bangunnya kesiangan terus.
                  </p>
                </div>

                <div className="flex flex-col gap-4 mt-3">
                  <button onClick={resetScan} className="w-full border-[3px] border-teal-400/80 rounded-full py-4 flex justify-center items-center gap-3 text-teal-400 font-bold text-lg md:text-xl tracking-wider hover:bg-teal-400/10 transition-colors shadow-[0_0_15px_rgba(45,212,191,0.1)] active:scale-95">
                    SCAN ULANG REALITA
                  </button>
                  <button onClick={openWorkspace} className="w-full bg-[#ffb3c6] rounded-full py-4 flex justify-center items-center gap-3 text-rose-950 font-extrabold text-lg md:text-xl tracking-wider hover:bg-[#ffa0b8] transition-colors shadow-[0_0_20px_rgba(251,113,133,0.4)] active:scale-95">
                    GUNAKAN JALUR BELAKANG
                  </button>
                </div>
              </div>
            ) : (
              <>
                <h1 className="text-2xl md:text-4xl font-extrabold text-white mb-16 text-center tracking-widest drop-shadow-md">
                  Ailabs ORDAL BIOMETRIK SCANNER
                </h1>

                <div className={`transition-all duration-300 border-2 rounded-xl px-6 py-4 md:px-12 md:py-6 mb-20 w-full text-center ${borderColor} ${bgColor} ${shadowColor}`}>
                  <p className={`text-base md:text-xl font-bold tracking-wide transition-all duration-300 ${textColor}`}>
                    {currentMessage}
                  </p>
                </div>

                <div className="relative flex items-center justify-center group touch-none w-36 h-36 md:w-48 md:h-48" onClick={startScan}>
                  <div className="absolute rounded-full blur-3xl transition-all duration-200"
                    style={{
                      width: '150%', height: '150%', backgroundColor: '#2dd4bf',
                      opacity: status === 'scanning' ? (progress / 100) * 0.4 : 0,
                      transform: `scale(${1 + (progress / 100) * 0.5})`
                    }}
                  />

                  {/* Fingerprint SVG Asli */}
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke={fingerprintColor} strokeWidth="1.2" strokeLinecap="round" strokeLinejoin="round" 
                    className={`w-full h-full relative z-10 transition-colors duration-300 cursor-pointer hover:scale-105 active:scale-95 ${status === 'scanning' ? 'animate-pulse' : ''}`}>
                    <path d="M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4" />
                    <path d="M14 13.12c0 2.38 0 6.38-1 8.88" />
                    <path d="M17.29 21.02c.12-.6.43-2.3.5-3.02" />
                    <path d="M2 12a10 10 0 0 1 18-6" />
                    <path d="M2 16h.01" />
                    <path d="M21.8 16c.2-2 .131-5.354 0-6" />
                    <path d="M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2" />
                    <path d="M8.65 22c.21-.66.45-1.32.57-2" />
                    <path d="M9 6.8a6 6 0 0 1 9 5.2v2" />
                  </svg>

                  {status === 'scanning' && (
                    <div className="absolute left-0 right-0 h-[3px] bg-teal-200 shadow-[0_0_20px_6px_#2dd4bf] z-20 animate-scan-laser rounded-full pointer-events-none"></div>
                  )}
                </div>

                <div className="mt-24 h-12 flex items-center justify-center">
                  <p className="text-gray-300 text-sm md:text-base font-semibold tracking-wide">
                    Klik atau sentuh tombol sidik jari satu kali untuk memulai.
                  </p>
                </div>
              </>
            )}
          </div>

          <style>{`
            @keyframes scan-laser {
              0% { top: -5%; opacity: 0; }
              10% { opacity: 1; }
              90% { opacity: 1; }
              100% { top: 105%; opacity: 0; }
            }
            .animate-scan-laser {
              animation: scan-laser 1.5s cubic-bezier(0.4, 0, 0.2, 1) infinite alternate;
            }
            @keyframes fadeIn {
              from { opacity: 0; transform: translateY(10px); }
              to { opacity: 1; transform: translateY(0); }
            }
          `}</style>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
